<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DLC-个人网站</title>
    <link href="css/bootstrap.min.css" type="text/css" rel="stylesheet">
    <link href="css/style.css" type="text/css" rel="stylesheet">
    <link href="css/nprogress.css" type="text/css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.min.js" type="text/javascript"></script>
    <script src="js/respond.min.js" type="text/javascript"></script>
    <script src="js/selectivizr-min.js" type="text/javascript"></script>
<![endif]-->
    <link rel="apple-touch-icon-precomposed" href="images/icon/icon.png">
    <link rel="shortcut icon" href="images/icon/favicon.ico">
    <meta name="Keywords" content="" />
    <meta name="description" content="" />
    <script type="text/javascript">
        //判断浏览器是否支持HTML5
        window.onload = function() {
            if (!window.applicationCache) {
                window.location.href = "ie.html";
            }
        }
    </script>
</head>

<body>
    <section class="container user-select">
        <header>
            <div class="hidden-xs header">
                <!--超小屏幕不显示-->
                <h1 class="logo">
                    <a href="index.html" title="DLC-个人网站"></a>
                </h1>
                <ul class="nav hidden-xs-nav">
                    <li class="active"><a href="index.html"><span class="glyphicon glyphicon-home"></span>网站主页</a></li>
                    <li><a href="project.html"><span class="glyphicon glyphicon-pencil"></span>项目demo</a></li>
                    <li><a href="photo.html"><span class="glyphicon glyphicon-book"></span>相册</a></li>
                    <li><a href="about.html"><span class="glyphicon glyphicon-user"></span>关于我</a></li>
                    <li><a href="message.html"><span class="glyphicon glyphicon-list-alt"></span>留言板</a></li>

                </ul>
                <div class="feeds">
                    <a class="feed feed-xlweibo" href="https://weibo.com/" target="_blank"><i></i>新浪微博</a>
                    <a class="feed feed-txweibo" href="https://baijiahao.baidu.com/" target="_blank"><i></i>百家号</a>
                    <a class="feed feed-rss" href="https://mp.toutiao.com/profile_v3/index" target="_blank"><i></i>头条号</a>
                    <a class="feed feed-weixin" data-toggle="popover" data-trigger="hover" title="微信扫一扫" data-html="true" data-content="<img src='images/weixin.png' alt=''>" href="javascript:;" target="_blank"><i></i>关注微信</a>
                </div>
                <div class="wall">
                    <a href="#" target="_blank">读者墙</a> | <a href="#" target="_blank">标签云</a>
                </div>
            </div>
            <!--/超小屏幕不显示-->
            <div class="visible-xs header-xs">
                <!--超小屏幕可见-->
                <div class="navbar-header header-xs-logo">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-xs-menu" aria-expanded="false" aria-controls="navbar"><span
                            class="glyphicon glyphicon-menu-hamburger"></span></button>
                </div>
                <div id="header-xs-menu" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav header-xs-nav">
                        <li class="active"><a href="index.html"><span class="glyphicon glyphicon-home"></span>网站主页</a>
                        </li>
                        <li><a href="project.html"><span class="glyphicon glyphicon-pencil"></span>项目demo</a></li>
                        <li><a href="photo.html"><span class="glyphicon glyphicon-book"></span>相册</a></li>
                        <li><a href="about.html"><span class="glyphicon glyphicon-user"></span>关于我</a></li>
                        <li><a href="about.html"><span class="glyphicon glyphicon-list-alt"></span>留言板</a></li>

                    </ul>
                    <form class="navbar-form" action="search.php" method="post" style="padding:0 25px;">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="请输入关键字">
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-search" type="submit">搜索</button>
                            </span> </div>
                    </form>
                </div>
            </div>
        </header>
        <!--/超小屏幕可见-->
        <div class="content-wrap">
            <!--内容-->
            <div class="content">
                <header class="news_header">
                    <h2>如何进行代码压缩是页面性能最优（HTTP 压 缩）</h2>
                    <ul>
                        <li>DLC 发布于 2019-01-10</li>
                        <li>栏目：<a href="" title="" target="_blank">网站前端</a></li>
                        <li>来源：<a href="" title="" target="_blank">互联网</a></li>
                        <li><span class="glyphicon glyphicon-eye-open"></span> <strong>2002</strong> 预览</li>
                        <li><strong> 10 </strong> 评论</li>
                    </ul>
                </header>
                <article class="news_content">
                    <p>前端工程师做出的某些决定可以显著的减少 HTTP 请求以及响应的网络传输时间。终端用 户的带宽速度，网络服务提供商，距网络交换节点的距离这些因素都不受开发团队的控 制。但是仍有其它的因素会影响响应时间。比如，通过压缩 HTTP 响应来减少响应时间。</p>
                    <p>从 HTTP/1.1 开始，web 客户端就开始支持 HTTP 请求的 Accept-Encoding header。 Accept-Encoding: gzip, deflate </p>
                    <p>如果 web 服务器在请求中看到这种 header,它就会用客户端列出来的方法来压缩响应内 容。web 服务器通过响应中的 Content-Encoding header 通知 web 客户端。Content-Encoding: gzip </p>
                    <p>Gzip 是目前最流行以及最有效的压缩方法。其它你有可能看到的压缩格式是 deflate,但 是它不是很流行以及很有效。</p>
                    <p>Gzip 通常可以把响应内容大小减少 70%。目前浏览器当中接近 90%的网络流量支持 gzip。 </p>
                    <p>对于浏览器以及代理来说还有一个已知问题就是浏览器期望的内容和它获取的压缩内容可 能不匹 配。幸运的是，这种情况随着旧版浏览器的使用率越来越低会越来越少。Apache 模块通过添加适 当的不同响应头来解决这个问题。 </p>
                    <p>服务端选择用 Gzip 压缩内容主要依赖于文件类型，但是通常也受限于要决定压缩的内 容。大部分 web 站点用 gzip 压缩 html 文档。当然也值的压缩脚本以及样式文件，但是很 多网站 都没有选择这么做。事实上，可以用 gzip 压缩任何文本响应内容，包括 XML 和 JSON。Image 和 PDF 不建议 gzip 压缩，因为它们都是被压缩过的。试图压缩它们不仅浪 费 CPU 也有可能会增加文 件大小。 </p>
                    <p>用 gzip 压缩尽可能多的文件类型是减少页面大小提升用户体验的一种简单方法。 </p>
                    <p>下面来深入的了解一下 gzip。</p>
                    <h4>gZip </h4>
                    <p>gzip 是 GNUzip 的缩写，最早用于 UNIX 系统的文件压缩。HTTP 协议上的 gzip 编码是一种 用来改进 web 应用程序性能的技术，web 服务器和客户端（浏览器）必须共同支持 gzip。 目前主流的浏览器，Chrome,firefox,IE 等都支持该协议。常见的服务器如 Apache， Nginx，IIS 同样支持 gzip。 </p>
                    <p>gzip 压缩比率在 3 到 10 倍左右，可以大大节省服务器的网络带宽。而在实际应用中，并 不是对所有文件进行压缩，通常只是压缩静态文件。 </p>
                    <p>1)浏览器请求 url，并在 request header 中设置属性 accept-encoding:gzip。表明浏览 器支持 gzip。</p>
                    <p>2)服务器收到浏览器发送的请求之后，判断浏览器是否支持 gzip，如果支持 gzip，则向 浏览器传送压缩过的内容，不支持则向浏览器发送未经压缩的内容。一般情况下，浏览器 和服务器都支持 gzip，response headers 返回包含 content-encoding:gzip。 </p>
                    <p>3)浏览器接收到服务器的响应之后判断内容是否被压缩，如果被压缩则解压缩显示页面内 容。</p>
                    <p>下面以淘宝为例，验证一下开启 gzip 的效果。客户端（浏览器）请求 http://www.taobao.com/。本次测试使用的浏览器为 Chrome,打开控制台查看网络信息可 以看到 request headers 中包含：accept-encoding:gzip, deflate, sdch，表明 chrome 浏览器支持这三种压缩。这里值得一提的是 accept-encoding 中添加的另外两个压缩方式deflate 和 sdch。deflate
                        与 gzip 使用的压缩算法几乎相同，这里不再赘叙。sdch 是 Shared Dictionary Compression over HTTP 的缩写，即通过字典压缩算法对各个页面中 相同的内容进行压缩，减少相同的内容的传输。sdch 是 Google 推出的，目前只在 Google Chrome, Chromium 和 Android 中支持。 </p>

                    <p><img src="images/img4-1.png" alt="" title="" /></p>
                    <p>淘宝 response header </p>
                    <p><img src="images/img4-2.png" alt="" title="" /></p>
                    <p>在企业级应用中，通常被使用到的服务器有 nginx，Apache 等。nginx 是取代 Apache 的 高性能服务器，本文接下来的内容会介绍一下在 Nginx 中如何开启 gzip。 </p>
                    <p>Nginx 中开启 gzip：</p>
                    <p>如果服务端接口使用 nodejs 和 express，那么开启 nginx 非常简单。启用 compress() 中间件即可并在 nginx.conf 中添加 gzip 配置项即可，express.compress() gzip 压缩中 间件，通过 filter 函数设置需要压缩的文件类型。压缩算法为 gzip/deflate。这个中间 件应该放置在所有的中间件最前面以保证所有的返回都是被压缩的。如果使用 java 开 发，需要配置 filter。 </p>
                    <p>下面详细介绍一下如何在 nginx.conf 中配置 gzip。配置的 gzip 参数图所示： </p>
                    <p><img src="images/img4-3.png" alt="" title="" /></p>
                    <p>gzip 参数 </p>
                    <p>添加完参数后，运行 nginx –t 检查一下语法，若语法检测通过，则开始访问 url 检测 gzip 是否添加成功。以下为我所使用的 gzip 配置的作用。</p>
                    <p>1) gzip on：开启 gzip。 </p>
                    <p>2) gzip_comp_level：gzip 压缩比。 </p>
                    <p>3) gzip_min_length：允许被压缩的页面最小字节数。</p>
                    <p>4) gzip_types：匹配 MIME 类型进行压缩，text/html 默认被压缩。 </p>
                    <h4>http 与 gZip </h4>
                    <p>gZip 文件怎么通讯 </p>
                    <p>我们传输压缩文件给别人时候一般都带着后缀名 .rar, .zip 之类，对方在拿到文件后 根据相应的后缀名选择不同的解压方式然后去解压文件。我们在 http 传输时候解压文 件的这个角色的扮演者就是我们使用的浏览器，但是浏览器怎么分辨这个文件是什么格 式，应该用什么格式去解压呢？</p>
                    <p>在 http／1.0 协议中关于服务端发送的数据可以配置一个 Content-Encoding 字 段，这个字段用于说明数据的压缩方法 </p>
                    <p class="min">Content-Encoding: gzip</p>
                    <p class="min">Content-Encoding: compress</p>
                    <p class="min">Content-Encoding: deflate </p>
                    <P>客户端在接受到返回的数据后去检查对应字段的信息，然后根据对应的格式去做相应的解 码。客户端在请求时，可以用 Accept-Encoding 字段说明自己接受哪些压缩方法。</P>
                    <P>Accept-Encoding: gzip, deflate </P>
                    <P>我们在浏览器的控制台中可以看到请求的相关信息 </P>
                    <p><img src="images/img4-4.png" alt="" title="" /></p>
                    <h4>兼容性 </h4>
                    <P>提到浏览器作为一个前端就不由自主的会想一个问题，会不会有浏览器不支持呢。 HTTP/1.0 是 1996 年 5 月发布的。好消息是基本不用考虑兼容性的问题，几乎所有浏览 器都支持它。值得一提的是 ie6 的早起版本中存在一个会破坏 gZip 的错误，后 面 ie6 本身在 WinXP SP2 中修复了这个问题，而且用这个版本的用户数量也很少。</P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                    <P></P>
                </article>
                <div class="reprint">转载请说明出处：<a href="" title="" target="_blank">DLC-个人网站</a> » <a href="" title="" target="_blank">欢迎来到DLC-个人网站</a></div>
                <div class="zambia"><a href="javascript:;" name="zambia" rel=""><span
                            class="glyphicon glyphicon-thumbs-up"></span> 赞（0）</a></div>

                <nav class="page-nav"> <span class="page-nav-prev">上一篇<br />
                        <a href="content 3.html" rel="prev">webpack 基本架构</a></span> <span class="page-nav-next">下一篇<br />
                        <a href="#" rel="next">发布中……</a></span> </nav>

                <div class="content-block comment">
                    <h2 class="title"><strong>评论</strong></h2>
                    <form action="comment.php" method="post" class="form-inline" id="comment-form">

                        <div class="comment-form">
                            <textarea placeholder="说说您的想法" name="commentContent"></textarea>
                            <div class="comment-form-footer">
                                <div class="comment-form-text">请先 <a href="javascript:;">登录</a> 或 <a href="javascript:;">注册</a>，也可匿名评论 </div>
                                <div class="comment-form-btn">
                                    <button type="submit" class="btn btn-default btn-comment">提交评论</button>
                                </div>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
        <!--/内容-->
        <aside class="sidebar visible-lg">
            <!--右侧>992px显示-->
            <div class="sentence"> <strong>每日一句</strong>
                <h2>2019年5月1日 星期三</h2>
                <p>如果你看到面前的阴影，别怕，那是因为你的背后有阳光。</p>
            </div>
            <div id="search" class="sidebar-block search" role="search">
                <h2 class="title"><strong>搜索</strong></h2>
                <form class="navbar-form" action="search.php" method="post">
                    <div class="input-group">
                        <input type="text" class="form-control" size="35" placeholder="请输入关键字">
                        <span class="input-group-btn">
                            <button class="btn btn-default btn-search" type="submit">搜索</button>
                        </span> </div>
                </form>
            </div>
            <div class="sidebar-block recommend">
                <h2 class="title"><strong>热门推荐</strong></h2>
                <ul>
                    <li>
                        <a target="_blank" href="content 4.html"> <span class="thumb"><img src="images/icon/icon1.png" alt=""></span>
                            <span class="text">如何进行代码压缩使页面性能最优（HTTP压缩）...</span> <span class="text-muted">阅读(2165)</span></a>
                    </li>
                    <li>
                        <a target="_blank" href="content 3.html"> <span class="thumb"><img src="images/icon/icon2.png" alt=""></span>
                            <span class="text">webpack 基本架构 ...</span> <span class="text-muted">阅读(2165)</span></a>
                    </li>
                    <li>
                        <a target="_blank" href="content 2.html"> <span class="thumb"><img src="images/icon/icon4.png" alt=""></span>
                            <span class="text">如何使用内容发布网络（CDN)优化网络性能 ...</span> <span class="text-muted">阅读(2165)</span></a>
                    </li>
                    <li>
                        <a target="_blank" href="content 1.html"> <span class="thumb"><img src="images/icon/icon3.png" alt=""></span>
                            <span class="text">如何减少 HTTP 请求 确保你的性能最优 ...</span> <span class="text-muted">阅读(2165)</span></a>
                    </li>
                    <li>
                        <a target="_blank" href="content.html"> <span class="thumb"><img src="images/icon/icon0.png" alt=""></span>
                            <span class="text">常用的 ajax 优化方法有哪些 ...</span> <span class="text-muted">阅读(2165)</span></a>
                    </li>
                </ul>
            </div>
            <div class="sidebar-block comment">
                <h2 class="title"><strong>最新评论</strong></h2>
                <ul>
                    <li data-toggle="tooltip" data-placement="top" title=""><a target="_blank" href=""><span
                                class="face"><img src="images/icon/icon.png" alt=""></span> <span
                                class="text"><strong>猎户星座</strong> (2015-10-18) 说：<br />
                                感谢分享，学习了很受益 ...</span></a></li>
                    <li data-toggle="tooltip" data-placement="top" title=""><a target="_blank" href=""><span
                                class="face"><img src="images/icon/icon.png" alt=""></span> <span
                                class="text"><strong>人生苦短</strong> (2015-10-18) 说：<br />
                                学习了，加油站长 ...</span></a></li>
                    <li data-toggle="tooltip" data-placement="top" title=""><a target="_blank" href=""><span class="face"><img src="images/icon/icon.png" alt=""></span>
                            <span class="text"><strong>负刀入梦里</strong> (2015-10-18) 说：<br />
                                文章很详细，也通俗易懂，很是受益 ...</span></a></li>
                    <li data-toggle="tooltip" data-placement="top" title=""><a target="_blank" href=""><span class="face"><img src="images/icon/icon.png" alt=""></span>
                            <span class="text"><strong>梦幻代码</strong> (2015-10-18) 说：<br />
                                人生苦短，我用Python ...</span></a></li>
                    <li data-toggle="tooltip" data-placement="top" title=""><a target="_blank" href=""><span class="face"><img src="images/icon/icon.png" alt=""></span>
                            <span class="text"><strong>宅男</strong> (2015-10-18) 说：<br />
                                大神，前端有哪些框架呢 ...</span></a></li>
                </ul>
            </div>
        </aside>
        <!--/右侧>992px显示-->
        <footer class="footer">邓力才 | 版权所有 &copy;<a href="#">2018-2019</a>&nbsp;| 网站创建时间：2019-05-01 08:10:20 &nbsp;&nbsp;&nbsp;<span><a href="http://icp.chinaz.com/"
            target="_blank">粤ICP备xxxxxxxx号-x</a></span>
        </footer>
    </section>
    <div>
        <a href="javascript:;" class="gotop" style="display:none;"></a>
    </div>
    <!--/返回顶部-->
    <script src="js/jquery-2.1.4.min.js" type="text/javascript"></script>
    <script src="js/nprogress.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        //页面加载
        $('body').show();
        $('.version').text(NProgress.version);
        NProgress.start();
        setTimeout(function() {
            NProgress.done();
            $('.fade').removeClass('out');
        }, 1000);
        //返回顶部按钮
        $(function() {
            $(window).scroll(function() {
                if ($(window).scrollTop() > 100) {
                    $(".gotop").fadeIn();
                } else {
                    $(".gotop").hide();
                }
            });
            $(".gotop").click(function() {
                $('html,body').animate({
                    'scrollTop': 0
                }, 500);
            });
        });
        //提示插件启用
        $(function() {
            $('[data-toggle="popover"]').popover();
        });
        $(function() {
            $('[data-toggle="tooltip"]').tooltip();
        });
        //鼠标滑过显示 滑离隐藏
        //banner
        $(function() {
            $(".carousel").hover(function() {
                $(this).find(".carousel-control").show();
            }, function() {
                $(this).find(".carousel-control").hide();
            });
        });
        //本周热门
        $(function() {
            $(".hot-content ul li").hover(function() {
                $(this).find("h3").show();
            }, function() {
                $(this).find("h3").hide();
            });
        });
        //相关推荐
        $(function() {
            $(".related-content ul li").hover(function() {
                $(this).find("h3").show();
            }, function() {
                $(this).find("h3").hide();
            });
        });
        //页面元素智能定位
        $.fn.smartFloat = function() {
            var position = function(element) {
                var top = element.position().top; //当前元素对象element距离浏览器上边缘的距离 
                var pos = element.css("position"); //当前元素距离页面document顶部的距离
                $(window).scroll(function() { //侦听滚动时 
                    var scrolls = $(this).scrollTop();
                    if (scrolls > top) { //如果滚动到页面超出了当前元素element的相对页面顶部的高度 
                        if (window.XMLHttpRequest) { //如果不是ie6 
                            element.css({ //设置css 
                                position: "fixed", //固定定位,即不再跟随滚动 
                                top: 0 //距离页面顶部为0 
                            }).addClass("shadow"); //加上阴影样式.shadow 
                        } else { //如果是ie6 
                            element.css({
                                top: scrolls //与页面顶部距离 
                            });
                        }
                    } else {
                        element.css({ //如果当前元素element未滚动到浏览器上边缘，则使用默认样式 
                            position: pos,
                            top: top
                        }).removeClass("shadow"); //移除阴影样式.shadow 
                    }
                });
            };
            return $(this).each(function() {
                position($(this));
            });
        };
        //启用页面元素智能定位
        $(function() {
            $("#search").smartFloat();
        });


        //ajax更新点赞值
        $(function() {
            $(".content .zambia a").click(function() {
                var zambia = $(this);
                var id = zambia.attr("rel"); //对应id   
                zambia.fadeOut(1000); //渐隐效果   
                $.ajax({
                    type: "POST",
                    url: "zambia.php",
                    data: "id=" + id,
                    cache: false, //不缓存此页面   
                    success: function(data) {
                        zambia.html(data);
                        zambia.fadeIn(1000); //渐显效果   
                    }
                });
                return false;
            });
        })
    </script>
</body>

</html>